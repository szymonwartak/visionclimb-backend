<!DOCTYPE html>
<html>
<head>
    <meta content="text/html; charset=UTF-8" http-equiv="content-type" />
    <title>Home</title>
</head>
<body class="lift:content_id=main">
<div id="main" class="lift:surround?with=default;at=content">
    <!-- head -->
    <script type="text/javascript" class="lift:head" src="/js/climage.js"></script>
    <script type="text/javascript" class="lift:head" src="/js/rest.js"></script>
    <script type="text/javascript" class="lift:head">
        // setup climbing image behaviour
        var currentClimage;
        $(document).bind('ready',function(event) {
            currentClimage = new Climage();
            $('#canvas').click(function(e) {
                $('#output').append(1);
                currentClimage.addRoutePoint(e.clientX-$("#canvas").offset().left, e.clientY-$("#canvas").offset().top);
            });

            $('#output').append(2);
            $.getJSON('http://'+server+'/api/route/getRoutes', function(data) {
                $('#output').append(3);
                var items = ['<option></option>'];
                data.map( function(route) {
                    items.push('<option value="'+route.id+'">'+route.name+'</option>');
                });
//						$('<select/>', {
//							'id': 'routeSelector',
//							html: items.join('')
//						}).appendTo('#routeList');
                $('#routeSelector').html(items.join(''))
            });
            $('#output').append(4);
            $('#routeSelector').change(function() {
                getRoute($('#routeSelector option:selected').val())
            });
        });
    </script>

    <!-- body -->
    <h2>Welcome to your project!</h2>

    <!--<span class="lift:climageSearch.controls">-->
    <!--<span id="routeList"/>-->
    <select id="routeSelector"></select>
    <input type="submit" onclick="location.reload()" value="reload"/>

    <canvas width="300" height="200" id="canvas"></canvas>
    <input type="text" id="routeName"/>
    <input type="submit" onclick="postClimage()" value="send"/>
    <input type="submit" onclick="currentClimage.takePicture()" value="picture"/>
    <div id="output"></div>

    <!--</span>-->
</div>
</body>
</html>

